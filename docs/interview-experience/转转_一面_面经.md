---
title: 转转一面
index: true
icon: laptop-code
category:
  - 面经
---

1. 算法题：找出一个字符串里面，不重复的一个最长的一个连续子串（子字符串），入参是String
    1.  约8min完成
2.  Java Synchronize关键字和ReentrantLock锁的类有什么区别？
    1.  答：都能实现互斥，synchronize基于java内置的锁机制，reentrantLock基于CAS。synchronize不支持可重入，reentrantLock支持可重入（面试官指正，synchronize支持可重入）
3.  HashMap底层实现是如何解决Hash冲突的？
    1.  答：jdk1.7之前用链表解决冲突。jdk1.8之后用链表+红黑树解决冲突，冲突长度<8使用链表，>8的时候把列表转换为红黑树
    2.  【追问】红黑树的查询时间复杂度是？答：logn
    3.  【追问】为什么用红黑树，不用二叉平衡树？答：红黑树比二叉平衡树调整的时候有更优复杂度（口误，应该是更优开销），平衡二叉树每次 插入都会有细微调整，红黑树维持左右子树高度相差不超过1，插入的时候时候相对少调整，只会在一侧特别不平衡的时候调整，以使得符合红黑树的定义。
4.  除了链表法，你还知道有什么方法来解决哈希冲突？
    1.  答：【描述不好】二次探测法，使用一个探测序列来找下一个槽；二次哈希，可能用相同的哈希函数，也可能不同？。
5.  mysql的B+树索引有怎么样的特点？或者是B+数的特点？
    1.  答：在树的叶子节点存储一行的完整数据，在中间节点只存大概索引的位置。在非叶子节点可以存储多个区间，在叶子节点里面是有序的，可以通过二分查找来找到合适的数据。在叶子节点内置的存储结构，是控制叶子节点每页存储的数据<16KB，以保证顺序读写，还有就是插入、删除等调整。
6.  叶子节点如果是跨节点的话，怎么实现有序访问？
    1.  答：有类似链表的形式，有一个指针可以关联下一个节点的存储位置。
    2.  【追问】单向链表还是双向链表？
    3.  答：不太记得
7.  Redis提供了几种持久化数据的方式？
    1.  答：1.一个是RDB，把所有当前的key数据全dump下来，2.aop追加最新的命令
    2.  【追问】只有两种吗？
    3.  答：主从库算吗？
    4.  【追问】这两种方式会不会结合起来使用？
    5.  答：可以的，凌晨RDB、平时AOF
8.  分布式锁基于redis的哪个命令去做的？
    1.  答：设置值的时候基于set或setnx命令来做的。扩展之后的set命令是支持加超时时间PX、还有NX（参数）。删除值的话一般是基于lua脚本来实现原子化操作，做到检测是否持有和删除的操作。
9.  RocketMQ如何去保证消息的顺序消费？
    1.  （提问的是应用层，但回答方向是mq底层）答：topic里的队列是顺序读写的
    2.  【追问】从生产者、消费者的角度如何实现？
    3.  （不太对）答：生产者的话是并发投递，不保证有序。可以打tag指定投递到哪个分区。消费者的话，要保证一个分区只能有一个消费者，才能达到有序。
10.  Nacos在1.0升级到2.0的时候，把http的长轮询改为GRPC这个你有了解过为什么吗？
     1.  不会的问题，不应该强答
11.  Dubbo的负载均衡的模式有哪些？
12.  ClickHouse作为列式数据库为什么适合大数据量的存储，为什么针对数据的查询和聚合比较快？快在哪里？
     1.  答：以列为单位，相同数据结构，可以压缩，节约io。聚合查询为什么快的话，分布式，存储的时候以分片存储，同一一个分片在同一个节点。查询的时候先跨库预查询id，再聚合数据。
13.  存储引擎是什么？Merge Tree引擎支持你说的操作吗？
14.  笔试题，三个线程轮流打印ABC，交叉打印100次。



总结：

1.  没突出重点，突出自己
2.  不了解的知识点强行答了
3.  线程交叉打印，没想清楚如何控制并发，基本乱写一通。而且暴露了对synchronize不熟悉

