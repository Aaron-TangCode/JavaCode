<template><div><ol>
<li>自我介绍（流畅度）
<ol>
<li>校内经历介绍：可说出在校期间专业课程知识比较扎实</li>
<li>第一段工作经历介绍：还行
<ol>
<li><strong>公司+岗位、业务、框架、优势</strong></li>
</ol>
</li>
<li>第二段工作经历介绍：不熟，有点踉跄。
<ol>
<li>有必要说年限不高，重大需求给老员工处理？只有一个支付的吧</li>
</ol>
</li>
<li>项目经历介绍（主要是第一个项目）：
<ol>
<li>有点啰嗦，说了两次改变收单机构降低费率</li>
<li>旧逻辑的描述太啰嗦，特别是举例的时候</li>
<li>支付中台对业务方系统接口、多支付的情景，啰嗦</li>
<li>白名单：userId白名单【List】</li>
<li>切流方案描述太细了，直接说改大就能让更多的用户走新逻辑</li>
<li>控制了两个接入风险，该不该细说？</li>
</ol>
</li>
</ol>
</li>
<li>你写的4个项目，哪些是你主导负责比较多的？
<ol>
<li>【啰嗦】回答：第二个是我主导开发的，第三个是别人提出来的但是是我主导配置的，第四个不是我主导的，是高年限的带然后我负责我们这部分。 第一个我主导部分设计和全部开发，第二个是我全程主导设计开发的</li>
<li>追问：哪个是你参与比较多一点的？</li>
</ol>
</li>
<li>容灾降级策略，基于Redis zset实现故障频率识别，是怎么做的？详细点。
<ol>
<li>【啰嗦】描述触发的地方，拉起支付的接口，又说了一遍业务流程。</li>
<li>redis-zset标记不熟</li>
<li>在调第三方的接口开始捕获的</li>
</ol>
</li>
<li>追问：具体的key设置是怎么设置的？
<ol>
<li>【正解】排序分数用时间戳，value也是时间戳</li>
</ol>
</li>
<li>zset底层结构是什么？zset是如何排序的？
<ol>
<li>zset使用跳表和哈希表组合实现。跳表保证元素按score有序排列，哈希表维护value到score的映射，支持O(1)查询value的分数</li>
<li>排序规则：分数优先，字典序辅助
<ol>
<li>如果元素较少、元素不大时（默认配置128元素、单元素64KB内），redis会用压缩列表ziplist实现。此时插入/删除使用插入排序，插入、删除、查询时间复杂度是O(n)</li>
</ol>
</li>
</ol>
</li>
<li>为什么zset不用其他的数据结构，比如二叉树红黑树？
<ol>
<li>实现复杂度更低，这是软件工程方面的考虑吧，更好理解和维护</li>
<li>范围查询性能高，比如zRange、zRangeByScore等，跳表在范围查询上的效率很高，比红黑树的中序遍历高些</li>
<li>插入、删除的性能高，因为不需要像红黑树一样做复杂的平衡调整</li>
<li>内存占用更优，每个节点只需要平均2个指针，红黑树需要额外的颜色位和两个指针</li>
<li><s>跳表在并发环境下更容易实现无锁、轻量级锁的并发控制。相比之下红黑树的平衡操作涉及多个节点，并发控制更困难</s></li>
</ol>
</li>
<li>用zset除了做这个业务，还用来做过什么其他业务吗？
<ol>
<li>排行榜的，原本打算用zset做，但是因为预期qps很低，直接查db即可</li>
</ol>
</li>
<li>场景题：直播业务经常有送礼打榜的问题，榜单会显示对应的用户id、名称、分数，实现这样的排行榜，要实现送的礼物分值一样的时候，按照送礼的时间先后顺序排序怎么做？
<ol>
<li>答：按照bit拼接的形式，一个Long分为64bit，前32bit表示分数，后32bit表示时间，这样拼接</li>
<li>【追问】这种方式会不会有什么问题？</li>
<li>答：分数不能超过32bit整型</li>
<li>【追问】分值超过32bit整型的时候怎么办？</li>
<li>答：在value里冗余时间戳，内存里进行重排序，仅对分数相同的区间进行重排序，挺快</li>
<li>【【反思】】没理解清楚redis zset的底层，底层是Double，可以利用double的小数位来做。也可以利用zset的排序机制是先score后value，用value前缀里存时间戳来做</li>
</ol>
</li>
<li>Redis除了zset还用过别的其他什么数据结构？
<ol>
<li>答：String、List、Hash</li>
</ol>
</li>
<li>延时队列了解过吗？干嘛用的？
<ol>
<li>答：一开始答了解过。不熟，只是关联想到mq延时消息。</li>
</ol>
</li>
<li>假如线上Redis数据库CPU突然飙升到100%，如何排查？
<ol>
<li>答：怀疑大key问题，但是不熟redis的运维，应该能用redis的运维工具找到大key吧</li>
<li>【追问】如果排查完没有大key呢？</li>
<li>答：可能内存不足，在进行key回收。可能有比较大的事务，比如lua脚本、自身事务操作的数据量级比较大。</li>
<li>【追问】还有吗？</li>
</ol>
</li>
<li>Redis单机最高支持多少并发？
<ol>
<li>答：10万</li>
<li>【追问】你自己测试过的吗？答：网上的数据</li>
<li>【追问】自己压测过吗？什么配置？答：什么配置啊，10万qps</li>
<li>参考阿里云：2核处理器的redis，8万QPS</li>
</ol>
</li>
<li>Redis为什么这么快？
<ol>
<li>答：
<ol>
<li>基于内存实现，内存读写速度快</li>
<li>用C/C++（好像没有加）语言实现，自己实现内存回收。没有java的jvm转义、垃圾回收</li>
<li>不支持复杂的操作，比如事务不支持原子性，保护了高性能</li>
</ol>
</li>
</ol>
</li>
<li>上个公司的离职原因是什么？
<ol>
<li>答：业务收缩、业务中心调整，经济性裁员</li>
<li>【追问】两次都裁到你，运气不太行啊</li>
<li>答：这次是因为行情冲击+高管变动，新领导来的主要目的是降本，做过日志缩减、日志优化、微服务合并、机器缩配，主键裁人</li>
</ol>
</li>
<li>现在找工作有什么预期？
<ol>
<li>答：基本保障双休，希望有高并发的场景学习，没有特别PUA的文化就好了，之前有些同事会被PUA。还有希望业务相对稳定</li>
</ol>
</li>
<li>之前有了解过我们公司吗？</li>
<li>多线程用的多吗？
<ol>
<li>答：主要是用在简单的并发处理</li>
</ol>
</li>
<li>多线程用过哪些特性？比如juc、工具类
<ol>
<li>答：线程池、completableFuture类</li>
</ol>
</li>
<li>线程池一般会怎么用？
<ol>
<li>答：根据业务或者功能逻辑设置线程池，分业务逻辑做线程池。配置线程池的参数、配置等待队列，这样用</li>
<li>【遗漏】关注threadlocal、traceid等的传递</li>
</ol>
</li>
<li>线程池有哪些配置来着？</li>
<li>什么情况下会用到最大线程数？</li>
<li>假设有多个线程池，我想对线程池做实时监控，监控核心指标，比如使用的核心线程数、最大线程数、队列大小等的事实监控，可以怎么做？
<ol>
<li>答：主动数据上报，重写标准线程池，实现比如提交任务的时候上报数据等。如果是定时上报的话，用定时任务，拿到线程池的引用，定时调度一个获取数据的方法，拿到数据在上报到监控系统。</li>
</ol>
</li>
<li>如果创建ABC三个线程，想让三个线程等到某个时间点才执行？
<ol>
<li>自答：
<ol>
<li>答：最适合使用CountDownLatch，线程内判断值是否为0，别的地方设置为0；</li>
<li>第二个用jvm原生的synchronize、wait&amp;notify的机制，监控同一把锁，调用wait方法，然后再调用notifyAll激活所有线程</li>
<li>如果要强同时进行要强同时，要自旋检查标记位。</li>
<li>【追问】还有吗？</li>
<li>答：在一个核心地方，分别调用3个start方法</li>
</ol>
</li>
<li>豆包：
<ol>
<li>使用CountDownLatch控制并发，3个线程await</li>
<li>使用ScheduledThreadPool控制触发，调用countDown()</li>
</ol>
</li>
</ol>
</li>
<li>Springboot的starter了解过吗？知道starter是啥吗？
<ol>
<li>答：大概是自动配置，集成了一个元件。比如springboot集成redis starter，就会自动注入redis的组件到spring容器里面，可能会有默认配置一下子能起来，比如redis是localhost:6379，也可能需要手动配置。</li>
</ol>
</li>
<li>自己有自定义写过starter吗？
<ol>
<li>答：没写过，基本用开源封装好的基本够用</li>
</ol>
</li>
<li>Spring AOP用到过吗？什么业务用到？
<ol>
<li>答：MQ消费者，拦截MQ消费者消费操作，拿到消息的header，拿到traceId，把traceId设置到新的消费者的上下文里，实现traceId的统一</li>
</ol>
</li>
<li>AOP的底层实现是怎么样？
<ol>
<li>答：动态代理实现的，有子类代理、动态字节码代理实现的。</li>
<li>默认好像是子类代理。通过继承这个类，实现新的子类，在子类里实现需要做的AOP操作，再把子类赋值给父类引用。</li>
<li>如果是字节码代理，是通过新建一个原来的对象，修改原来的字节码，实现包装的功能。（好像记错了？只能实现interface维度的代理）</li>
</ol>
</li>
<li>你自己实现过动态代理吗？
<ol>
<li>答：试过简单通过字节码的动态代理，大概看了一下流程。</li>
<li>【追问】关键代码是什么？</li>
<li>答：关键代码大概是字节码的修改工具，用工具设置需要修改哪个方法，构建新的方法，把新的方法set到原来的对象里面去（应该是加载）</li>
<li>【追问】没听到关键的方法。。</li>
<li>答：关键的话应该是字节码的修改工具的使用</li>
<li>【追问】关键代码，有没有关键代码</li>
<li>答：不太记得了</li>
</ol>
</li>
<li>如果定义多个AOP，我想保证他们的执行顺序，可以怎么实现？
<ol>
<li>答：类标记应该是有顺序的，可以加顺序表。（答得稀烂）</li>
</ol>
</li>
<li>你之前做的哪些是有app的？
<ol>
<li>答：第二段经历，有微信小程序、支付宝小程序、安卓app、iosApp</li>
<li>【追问】有对接过吗？</li>
<li>答：有对接过，特别是在版本控制这块。如果会有比较大的结构的改动，我们会新建一个新的接口，处理新的逻辑。避免太多的历史包袱。如果老接口到了强更节点到了，可以下掉。</li>
</ol>
</li>
<li>如果使用APP某个功能、某个页面特别卡，反馈上来，怎么定位排查？
<ol>
<li>答：首先尝试本地复现，如果征得客人同意会尝试登陆客人的帐号访问界面，通过抓包确认数据请求、数据返回是否正常。</li>
<li>如果接口返回的时间正常的话，就可能是前端渲染的问题。 我们之前是不负责前端的，如果是渲染方面的问题就交给前端团队处理。</li>
<li>如果接口返回慢的话，要排查后端。</li>
</ol>
</li>
<li>前面提到抓包分析，有用过什么抓包工具？
<ol>
<li>答：用过win上Fiddler、mac上charles</li>
</ol>
</li>
<li>有了解过抓包工具的原理是怎么样的吗？
<ol>
<li>答：中间人攻击，需要客户端信任证书。如果app端有内置证书的操作一般是做不到的拦截的，这样如果自己团队可以打一个不需要校验内置证书。验证机制是基于公私钥的机制，如果需要的话就细讲。</li>
</ol>
</li>
<li>如果抓包定义到某个接口响应很慢，如何去分析？
<ol>
<li>答：看接口业务逻辑，看涉及哪些外部调用，比如redis调用、RPC调用、mysql调用，很少因为内部处理逻辑拖慢速度。如果日志打的好是可以看得清哪块外部调用时间长，如果是mysql就按慢查询处理策略、如果是redis排查大key、如果是网络波动的话一般是短暂的、如果是RPC就到另一个服务器查询。</li>
</ol>
</li>
<li>如果redis类似的问题，如果业务服务器突然CPU飙升到100%，如何排查？
<ol>
<li>答：登机器排查，top排查哪个线程占cpu，拿到pid调jstack命令查询堆栈，分析出CPU高的原因。如果分析不出来再用jmap看内存情况。要注意对线上的影响，要注意先断外部流量。或者用arthas插桩解决问题，这块不太熟。</li>
</ol>
</li>
<li>用jmap导出内存信息会有影响？为什么？
<ol>
<li>答：调jvm的一些接口来做的，好像要Stop the world，应该是这样</li>
</ol>
</li>
<li>jvm的内存结构是怎么样的？
<ol>
<li>答：栈存储jvm线程的信息和栈情况，类模板存储的类的元信息和static信息，常量池有字符串常量池、字符串字面量和static final这些，第四个是堆。堆根据jdk版本不同会有一些小变化，堆这块以jdk8为例</li>
<li>（漏了程序计数器）</li>
</ol>
</li>
<li>做过的业务，哪个业务设计上有亮点的，可以分享下？
<ol>
<li>积分兑换酒店系统</li>
</ol>
</li>
<li>你过往有遇到过什么线上事故吗？
<ol>
<li>答：深入业务的是价格公式精度丢失，线上验证阶段发现</li>
<li>【反思】先介绍需求背景、介绍算价流程，再说为什么丢精度</li>
<li>答2：表数据异常膨胀，集团规范，批量操作不能单批不超过1万。</li>
<li>【反思】没重头开始讲，应该从故障表现，到排查路径，再到</li>
<li>【追问】还有吗？</li>
<li>答3：订单状态同步的消息堆积</li>
</ol>
</li>
<li>刚才说的三个事故是怎么发现的？</li>
<li>通过这些事故，你自己有什么总结收获？
<ol>
<li>答：遇到事故不要慌，先想短期解决方案，再解决长期的问题</li>
<li>外围的基建很重要，比如监控、告警</li>
<li>开发人员上线一个功能要明确、控制好影响范围</li>
<li>代码review很重要，但是目前体现不了</li>
<li>线上诊断工具，尽量确保能使用，不然出了故障再找工具可能会用不了</li>
</ol>
</li>
<li>你自己有出过的什么事故吗？
<ol>
<li>MQ消费者序列化UID不一致，导致消费失败的问题</li>
<li>【缺点】没说清楚逻辑，是先用JSON序列化、再反序列化</li>
</ol>
</li>
<li>你做过代码Review吗？会重点关注什么？
<ol>
<li>答：关注代码逻辑对不对、代码逻辑跟业务需求逻辑是否一致；关注性能，避免循环查询；代码规范</li>
<li>【缺点】可以总览来说，先正确性，再高效性，再规范（日志规范等）</li>
</ol>
</li>
<li>前端写过吗？问一个基础html问题，如何用html实现一个三行两列的表格？
<ol>
<li><code v-pre>&lt;table&gt;</code>标签里面写，<code v-pre>&lt;tr&gt;</code>是一行 <code v-pre>&lt;th&gt;</code>第一行的列标题 <code v-pre>&lt;td&gt;</code>是列数据</li>
</ol>
</li>
<li>linux 我想看一个文件的前10行和后10行，可以分别怎么看？
<ol>
<li>head -n 10 filename; tail -n 10 filename</li>
</ol>
</li>
<li>linux想看nginx日志，想统计某个ip请求过的数量，可以怎么统计？关键命令是什么？
<ol>
<li><code v-pre>grep '192.168.1.1' /var/log/nginx/access.log | wc -l</code></li>
</ol>
</li>
<li>平时没有操作过linux排查过问题吗？
<ol>
<li>上上家排查过，登进机器看tail -f</li>
<li>【可补充】grep -A -B</li>
</ol>
</li>
<li>有用过阿里云哪些云产品？</li>
<li>你有对团队做过哪些额外贡献吗？除了领导安排的任务这种。</li>
</ol>
</div></template>


